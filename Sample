apiVersion: v1
kind: Service
metadata:
  name: airflow-scheduler
  namespace: airflow
spec:
  type: ClusterIP
  ports:
    - name: logs
      port: 8793
      targetPort: 8793
      protocol: TCP
  selector:
    # <-- replace the line below with the exact label on your scheduler pod:
    app.kubernetes.io/component: scheduler


kubectl apply -f airflow-scheduler-svc.yaml


kubectl -n airflow get svc airflow-scheduler -o wide
kubectl -n airflow get endpoints airflow-scheduler -o yaml


kubectl -n airflow rollout restart deploy/airflow-webserver
# wait for ready pods and then refresh Airflow UI and open a task log
kubectl -n airflow logs deploy/airflow-webserver --tail=100

