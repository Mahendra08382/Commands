$web   = (kubectl get pods -n airflow --no-headers | Select-String "web" | ForEach-Object { ($_ -split '\s+')[0] } | Select-Object -First 1)
$sched = (kubectl get pods -n airflow --no-headers | Select-String "scheduler" | ForEach-Object { ($_ -split '\s+')[0] } | Select-Object -First 1)

# create tar on your machine (streamed from scheduler)
kubectl exec -n airflow $sched -- bash -c "cd /opt/airflow && tar czf - logs" > C:\Windows\temp\airflow-logs.tgz

# copy into web pod (use Option A or B)
kubectl cp "C:\Windows\temp\airflow-logs.tgz" "airflow/${web}:/tmp/airflow-logs.tgz"

# extract inside web pod
kubectl exec -n airflow $web -- bash -c "mkdir -p /opt/airflow && tar xzf /tmp/airflow-logs.tgz -C /opt/airflow && rm -f /tmp/airflow-logs.tgz"
